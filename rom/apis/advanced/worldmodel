-- World Model

if not turtle then return false end

local turtlesensor = loader.require.turtlesensor
local volume = loader.require.volume
local event = loader.require.event

model = volume:new()
update = event:new()

local function blockSensed(v, result)
  local previous = model[v]
  if previous == result then return end  
  model[v] = result
  update:call(v, previous, result)
end

turtlesensor.blockSensed:add(blockSensed)
